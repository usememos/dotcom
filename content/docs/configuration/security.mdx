---
title: Security Configuration
description: Security best practices and configuration for protecting your Memos instance.
---

Security is paramount when deploying Memos in production environments. This guide covers security best practices, configuration, and hardening techniques using the tools available in Memos.

## Security Overview

<Cards>
  <Card title="Authentication" href="#authentication-security" icon="Key">
    User authentication, session management, and access controls
  </Card>
  <Card title="Network Security" href="#network-security" icon="Shield">
    HTTPS, firewall configuration, and network isolation
  </Card>
  <Card title="Data Protection" href="#data-protection" icon="Lock">
    Encryption, backup security, and data privacy
  </Card>
  <Card title="Access Control" href="#access-control" icon="Users">
    User roles, permissions, and API security
  </Card>
</Cards>

<Callout type="warning">
**Important**: Memos does not expose security-related environment variables for password policies, MFA, rate limiting, etc. Security features are managed through the web UI (Settings) and infrastructure-level controls (reverse proxy, firewall).
</Callout>

## Authentication Security

### Password Security

Memos implements secure password handling:

- **bcrypt hashing**: Passwords are hashed using bcrypt with unique salts
- **No plaintext storage**: Passwords are never stored in plain text
- **Rainbow table resistance**: Unique salts per password prevent rainbow table attacks

### Session Management

Memos uses secure session management:

- **Session cookies**: HttpOnly cookies prevent JavaScript access (XSS protection)
- **Secure flag**: HTTPS-only in production mode
- **SameSite attribute**: CSRF protection
- **14-day expiration**: Sliding window extends with activity
- **Device tracking**: Monitor active sessions in Settings → Sessions

### User Management

Configure user access through the web UI:

1. **Access Settings → Workspace**
2. **User Registration**: Enable/disable public signups
3. **Password Auth**: Option to disable password auth (OAuth-only)
4. **User Roles**: Assign roles (HOST, ADMIN, USER)

## Network Security

### HTTPS Configuration

Always use HTTPS in production. Configure your reverse proxy or load balancer to handle SSL/TLS termination.

#### Nginx Configuration

```nginx
server {
    listen 443 ssl http2;
    server_name memos.example.com;
    
    # SSL certificates
    ssl_certificate /etc/letsencrypt/live/memos.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/memos.example.com/privkey.pem;
    
    # SSL configuration
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
    
    # Security headers
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self';" always;
    
    # Proxy to Memos
    location / {
        proxy_pass http://127.0.0.1:5230;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocket support
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}

# Redirect HTTP to HTTPS
server {
    listen 80;
    server_name memos.example.com;
    return 301 https://$server_name$request_uri;
}
```

#### Apache Configuration

```apache
<VirtualHost *:443>
    ServerName memos.example.com
    
    # SSL configuration
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/memos.example.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/memos.example.com/privkey.pem
    
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite HIGH:!aNULL:!MD5
    
    # Security headers
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    
    # Proxy configuration
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:5230/
    ProxyPassReverse / http://127.0.0.1:5230/
    
    # WebSocket support
    RewriteEngine on
    RewriteCond %{HTTP:UPGRADE} websocket [NC]
    RewriteCond %{HTTP:CONNECTION} upgrade [NC]
    RewriteRule ^/?(.*) "ws://127.0.0.1:5230/$1" [P,L]
</VirtualHost>

<VirtualHost *:80>
    ServerName memos.example.com
    Redirect permanent / https://memos.example.com/
</VirtualHost>
```

### Firewall Configuration

#### UFW (Ubuntu)

```bash
# Default policies
sudo ufw default deny incoming
sudo ufw default allow outgoing

# SSH access
sudo ufw allow 22/tcp

# HTTP/HTTPS (if using reverse proxy)
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# Memos direct access (only if NOT using reverse proxy)
# sudo ufw allow 5230/tcp

# Enable firewall
sudo ufw enable
sudo ufw status
```

#### iptables

```bash
# Flush existing rules
sudo iptables -F

# Default policies
sudo iptables -P INPUT DROP
sudo iptables -P FORWARD DROP
sudo iptables -P OUTPUT ACCEPT

# Allow loopback
sudo iptables -A INPUT -i lo -j ACCEPT

# Allow established connections
sudo iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# SSH
sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT

# HTTP/HTTPS
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# Save rules
sudo iptables-save > /etc/iptables/rules.v4
```

### Rate Limiting

Implement rate limiting at the reverse proxy level to prevent abuse.

#### Nginx Rate Limiting

```nginx
# Define rate limiting zones
limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;
limit_req_zone $binary_remote_addr zone=login:10m rate=1r/s;
limit_req_zone $binary_remote_addr zone=api:10m rate=5r/s;

server {
    listen 443 ssl http2;
    server_name memos.example.com;
    
    # General pages
    location / {
        limit_req zone=general burst=10 nodelay;
        proxy_pass http://127.0.0.1:5230;
    }
    
    # Login endpoints
    location /api/v1/auth/ {
        limit_req zone=login burst=3 nodelay;
        proxy_pass http://127.0.0.1:5230;
    }
    
    # API endpoints
    location /api/ {
        limit_req zone=api burst=10 nodelay;
        proxy_pass http://127.0.0.1:5230;
    }
}
```

## Data Protection

### Database Security

#### SQLite

```bash
# Set proper file permissions
chmod 600 /var/lib/memos/memos_prod.db
chown memos:memos /var/lib/memos/memos_prod.db

# Backup with encryption (using gpg)
sqlite3 /var/lib/memos/memos_prod.db ".backup /tmp/backup.db"
gpg --symmetric --cipher-algo AES256 /tmp/backup.db
rm /tmp/backup.db
```

#### PostgreSQL

```sql
-- Enable SSL connections
ALTER SYSTEM SET ssl = on;
SELECT pg_reload_conf();

-- Restrict connections
-- Edit pg_hba.conf:
-- hostssl all all 0.0.0.0/0 md5
```

#### MySQL

```sql
-- Enable SSL connections
ALTER USER 'memos'@'%' REQUIRE SSL;
FLUSH PRIVILEGES;
```

### Backup Security

```bash
# Encrypted database backup script
#!/bin/bash
set -e

BACKUP_DIR="/backup/memos"
DATE=$(date +%Y%m%d-%H%M%S)
DB_FILE="/var/lib/memos/memos_prod.db"
BACKUP_FILE="$BACKUP_DIR/memos-$DATE.db"
ENCRYPTED_FILE="$BACKUP_FILE.gpg"

# Create backup directory
mkdir -p "$BACKUP_DIR"

# Backup SQLite database
sqlite3 "$DB_FILE" ".backup '$BACKUP_FILE'"

# Encrypt backup
gpg --symmetric --cipher-algo AES256 --batch --yes \
    --passphrase-file /etc/memos/backup-key.txt \
    --output "$ENCRYPTED_FILE" \
    "$BACKUP_FILE"

# Remove unencrypted backup
rm "$BACKUP_FILE"

# Remove backups older than 30 days
find "$BACKUP_DIR" -name "memos-*.db.gpg" -mtime +30 -delete

echo "Backup completed: $ENCRYPTED_FILE"
```

### File System Encryption

For sensitive deployments, consider full disk encryption:

```bash
# LUKS encryption for data directories (Linux)
sudo cryptsetup luksFormat /dev/sdb1
sudo cryptsetup luksOpen /dev/sdb1 encrypted_data
sudo mkfs.ext4 /dev/mapper/encrypted_data
sudo mount /dev/mapper/encrypted_data /var/lib/memos
```

## Access Control

### User Roles

Memos implements role-based access control (RBAC):

| Role | Description | Permissions |
|------|-------------|-------------|
| **HOST** | System owner | Full system access, all settings |
| **ADMIN** | Administrator | User management, most settings |
| **USER** | Standard user | Personal memo management |

### API Security

#### Access Tokens

Manage API access tokens in Settings → Access Tokens:

1. **Create tokens** with descriptive names
2. **Set expiration dates** (7/30/90/365 days or never)
3. **Revoke unused tokens** regularly
4. **One token per application**

#### Token Security Best Practices

```bash
# Store tokens securely (never in git)
export MEMOS_TOKEN="your-token-here"

# Use tokens in requests
curl -H "Authorization: Bearer $MEMOS_TOKEN" \
  https://memos.example.com/api/v1/memos

# Rotate tokens regularly
# 1. Create new token in web UI
# 2. Update applications with new token
# 3. Revoke old token after verification
```

### OAuth Security

Configure OAuth providers in Settings → Identity Providers:

1. **Use HTTPS** for callback URLs
2. **Validate redirect URIs** to prevent phishing
3. **Implement identifier filtering** to restrict access
4. **Regular credential rotation**

## Security Monitoring

### Audit Logging

Monitor user activity through Memos logs:

```bash
# View application logs
journalctl -u memos -f

# For Docker deployments
docker logs -f memos

# Filter for authentication events
journalctl -u memos | grep -i "auth"

# Filter for errors
journalctl -u memos | grep -i "error"
```

### Session Monitoring

Users can monitor their own sessions:

1. **Access Settings → Sessions**
2. **Review active sessions** (devices, locations, last access)
3. **Revoke suspicious sessions**
4. **Logout from all devices** if compromised

### Failed Login Monitoring

Monitor failed login attempts at the reverse proxy level:

```bash
# Install fail2ban
sudo apt install fail2ban

# Configure fail2ban for Memos
sudo tee /etc/fail2ban/jail.d/memos.conf << 'EOF'
[memos-auth]
enabled = true
port = http,https
filter = memos-auth
logpath = /var/log/nginx/access.log
maxretry = 5
bantime = 3600
findtime = 600
EOF

# Create filter
sudo tee /etc/fail2ban/filter.d/memos-auth.conf << 'EOF'
[Definition]
failregex = ^<HOST> .* "POST /api/v1/auth/signin HTTP.*" (401|403)
ignoreregex =
EOF

# Restart fail2ban
sudo systemctl restart fail2ban
```

## Security Hardening

### Operating System Level

```bash
# Keep system updated
sudo apt update && sudo apt upgrade -y

# Enable automatic security updates
sudo apt install unattended-upgrades
sudo dpkg-reconfigure -plow unattended-upgrades

# Configure SSH security
sudo nano /etc/ssh/sshd_config
# Set: PermitRootLogin no
# Set: PasswordAuthentication no
# Set: PubkeyAuthentication yes

# Restart SSH
sudo systemctl restart sshd
```

### Docker Security

```yaml
services:
  memos:
    image: neosmemo/memos:stable
    
    # Run as non-root user
    user: "1001:1001"
    
    # Read-only root filesystem
    read_only: true
    
    # Temporary directories
    tmpfs:
      - /tmp
    
    # Security options
    security_opt:
      - no-new-privileges:true
    
    # Resource limits
    mem_limit: 512m
    cpus: 0.5
    
    # Capabilities
    cap_drop:
      - ALL
    cap_add:
      - NET_BIND_SERVICE
```

### Network Isolation

```yaml
# Docker Compose with network isolation
version: '3.8'

services:
  memos:
    image: neosmemo/memos:stable
    networks:
      - internal
    environment:
      - MEMOS_MODE=prod
      - MEMOS_DRIVER=postgres
      - MEMOS_DSN=postgresql://memos:pass@postgres:5432/memos
    
  postgres:
    image: postgres:15
    networks:
      - internal
    environment:
      - POSTGRES_DB=memos
      - POSTGRES_USER=memos
      - POSTGRES_PASSWORD_FILE=/run/secrets/db_password
    secrets:
      - db_password
    
  nginx:
    image: nginx:alpine
    networks:
      - internal
      - external
    ports:
      - "443:443"
    depends_on:
      - memos

networks:
  internal:
    internal: true
  external:

secrets:
  db_password:
    file: ./secrets/db_password.txt
```

## Security Best Practices Checklist

### Pre-Deployment

- [ ] Security requirements defined and documented
- [ ] Threat modeling completed
- [ ] Security architecture reviewed
- [ ] SSL/TLS certificates obtained
- [ ] Secrets management strategy implemented

### Deployment

- [ ] HTTPS/TLS properly configured
- [ ] Strong password enforcement enabled
- [ ] OAuth providers configured (if applicable)
- [ ] Firewall rules configured
- [ ] Rate limiting implemented at reverse proxy
- [ ] Security headers configured
- [ ] Database access restricted
- [ ] Backup encryption configured

### Post-Deployment

- [ ] Security monitoring active
- [ ] Log aggregation configured
- [ ] Access tokens reviewed
- [ ] User sessions monitored
- [ ] Incident response plan documented
- [ ] Security update process established

### Ongoing Maintenance

- [ ] Regular security audits
- [ ] Dependency updates
- [ ] Configuration reviews
- [ ] Access reviews (revoke unused accounts/tokens)
- [ ] Log analysis
- [ ] Backup testing
- [ ] Security patch management

## Compliance Considerations

### GDPR Compliance

Memos provides features to help with GDPR compliance:

- **Data export**: Users can export their data
- **Data deletion**: Users can delete their accounts
- **Access logs**: Monitor who accesses data
- **Consent management**: Configure registration settings

### Data Privacy

- **Minimal data collection**: Memos collects minimal user data
- **User control**: Users control their own data
- **Transparency**: Clear documentation of data handling
- **Security**: Strong encryption and access controls

<Callout type="info">
**Compliance Note**: While Memos provides security features, compliance is a shared responsibility. Consult with legal counsel to ensure your deployment meets regulatory requirements.
</Callout>

## Incident Response

### Security Incident Procedures

1. **Identify** the incident scope and impact
2. **Isolate** affected systems to prevent spread
3. **Preserve** evidence for forensic analysis
4. **Notify** stakeholders according to policy
5. **Contain** and begin remediation
6. **Recover** systems from clean backups
7. **Review** and improve security posture

### Evidence Collection

```bash
# System snapshots (use with caution in production)
sudo dd if=/dev/sda of=/backup/system_snapshot.img bs=4M status=progress

# Application logs
cp -r /var/log/memos/ /backup/incident_logs/
journalctl -u memos > /backup/incident_logs/memos-journal.log

# Database backup
sqlite3 /var/lib/memos/memos_prod.db ".backup /backup/incident_logs/memos.db"

# Network capture (if needed)
sudo tcpdump -w /backup/incident_logs/network_capture.pcap -i eth0
```

## Next Steps

- [Configure authentication](/docs/configuration/authentication) options
- [Set up database](/docs/configuration/database) with proper security
- Configure regular backups with encryption
- Implement monitoring and alerting

---

Need help with security configuration? Consult with security professionals and check [GitHub Issues](https://github.com/usememos/memos/issues) for security-related discussions.